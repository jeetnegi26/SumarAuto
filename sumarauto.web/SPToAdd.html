/*    ==Scripting Parameters==

    Source Server Version : SQL Server 2016 (13.0.4259)
    Source Database Engine Edition : Microsoft SQL Server Enterprise Edition
    Source Database Engine Type : Standalone SQL Server

    Target Server Version : SQL Server 2017
    Target Database Engine Edition : Microsoft SQL Server Standard Edition
    Target Database Engine Type : Standalone SQL Server
*/

USE [sumarautoDb]
GO
/****** Object:  StoredProcedure [dbo].[GetPartofSameModel]    Script Date: 10/10/2024 2:37:56 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[GetPartofSameModel]
@Make NVARCHAR(100),
@Model NVARCHAR(100),
@Engine NVARCHAR(100),
@Chassis NVARCHAR(100)
AS
BEGIN
    -- Get distinct AutoPart Ids first
    WITH DistinctAutoParts AS (
        SELECT DISTINCT ap.Id
        FROM AutoParts ap
        INNER JOIN AutoPartMakes apm ON apm.AutoPart_Id = ap.Id
        INNER JOIN Makes m ON m.MakeId = apm.Make_Id
		LEFT JOIN AutoPartImages ai ON ai.AutoPartId = ap.Id AND ai.[Default] = 0
        WHERE m.Title = @Make
          AND apm.Model_Title = @Model
          AND apm.Chassis_Title = @Chassis
    )
    -- Now select the other fields for the distinct AutoPart Ids
    SELECT
        ap.Id,
        ap.Title,
        ap.ExtraField as Package,
		ai.Image
    FROM AutoParts ap
    JOIN DistinctAutoParts dap ON dap.Id = ap.Id
    LEFT JOIN AutoPartImages ai ON ai.AutoPartId = ap.Id AND ai.[Default] = 0
END







New table add

 CREATE TABLE FileUpload (
    Id INT PRIMARY KEY IDENTITY(1,1),  -- Auto-incrementing primary key
    Title NVARCHAR(255) NOT NULL,      -- Title with a max length of 255 characters
    FilePath NVARCHAR(500) NOT NULL,   -- File path with a max length of 500 characters
    CreatedBy NVARCHAR(100),           -- The user who created the record, optional
    CreatedOn DATETIME NOT NULL,       -- Date and time when the record was created
    EditedOn DATETIME,                 -- Date and time when the record was last edited
    Status BIT NOT NULL,               -- Boolean status (1 or 0)
    UserHostAdd NVARCHAR(50),          -- User's host address, optional
    DisplayOrder INT NOT NULL,         -- Order for display
    RewriteUrl NVARCHAR(255)           -- SEO-friendly URL, optional
);